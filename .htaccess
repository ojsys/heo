# Enable Passenger
PassengerEnabled On
PassengerAppRoot /home/heoeziok/heo
PassengerPython /home/heoeziok/virtualenv/heo/3.11/bin/python

# Rewrite rules for Django
RewriteEngine On

# Serve static files directly
RewriteCond %{REQUEST_URI} ^/static/
RewriteRule ^(.*)$ - [L]

# Serve media files directly
RewriteCond %{REQUEST_URI} ^/media/
RewriteRule ^(.*)$ - [L]

# Route everything else through Django
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ /passenger_wsgi.py/$1 [QSA,L]

# Security headers
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-XSS-Protection "1; mode=block"
</IfModule>

# Disable directory listing
Options -Indexes

# Protect sensitive files
<FilesMatch "^\.env|\.git|requirements\.txt|passenger_wsgi\.py$">
    Order allow,deny
    Deny from all
</FilesMatch>
